{% extends "base.html" %}
{% block content %}
<!-- Fullpage.js Container -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<div id="fullpage">
  <!-- SECTION 1: WELCOME -->
  <div class="section" id="welcome-section" data-bg="#E8F5E9" data-text-color="#2E7D32">
    <div class="welcome-content">
      <h1>Explore Sustainable Food Forests, One Harvest at a Time</h1>
      <div class="line"></div>
      <p class="tagline">Connecting Communities Through Sustainable Food Forests</p>
      <div class="cta-buttons">
        <a href="{{ url_for('views.food_forests') }}" class="cta-button">Explore Forests</a>
        <a href="{{ url_for('views.article') }}" class="cta-button secondary">Learn More</a>
      </div>
    </div>
  </div>

  <!-- SECTION 2: WHAT ARE FOOD FORESTS -->
  <div class="section" id="food-forest-section" data-bg="#F1F8E9" data-text-color="#33691E">
    <div class="content-container">
      <h2>What Are Food Forests?</h2>
      <div class="line"></div>
      <div class="food-forest-content">
        <div class="food-forest-text">
          <p>Food forests are sustainable, low-maintenance ecosystems that mimic natural forests but are filled with edible plants. It consists of multiple layers all working together to create a resilient system.</p>
          <p>Food forests require minimal intervention once established, as they're designed to be self-sustaining, just like natural ecosystems.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- SECTION 3: BENEFIT 1 - BIODIVERSITY -->
  <div class="section benefit-section" id="biodiversity-section" data-bg="#DCEDC8" data-text-color="#33691E">
    <div class="content-container">
      <div class="benefit-content">
        <div class="benefit-icon">
          <i class="fas fa-leaf"></i>
        </div>
        <h2>Enhancing Biodiversity</h2>
        <div class="line"></div>
        <p>Food forests create diverse habitats that support a wide range of plants, insects, birds, and other wildlife. By mimicking natural ecosystems, they provide homes for beneficial organisms that help control pests and pollinate plants naturally.</p>
      </div>
    </div>
  </div>

  <!-- SECTION 4: BENEFIT 2 - SOIL HEALTH -->
  <div class="section benefit-section" id="soil-section" data-bg="#C8E6C9" data-text-color="#1B5E20">
    <div class="content-container">
      <div class="benefit-content">
        <div class="benefit-icon">
          <i class="fas fa-seedling"></i>
        </div>
        <h2>Improving Soil Health</h2>
        <div class="line"></div>
        <p>The diverse plant species in food forests build soil health through natural processes. Deep-rooted trees bring up nutrients from below, while nitrogen-fixing plants enrich the soil. Fallen leaves create natural mulch that protects soil and feeds beneficial microorganisms.</p>
      </div>
    </div>
  </div>

  <!-- SECTION 5: BENEFIT 3 - CARBON SEQUESTRATION -->
  <div class="section benefit-section" id="carbon-section" data-bg="#B9F6CA" data-text-color="#00695C">
    <div class="content-container">
      <div class="benefit-content">
        <div class="benefit-icon">
          <i class="fas fa-cloud"></i>
        </div>
        <h2>Carbon Sequestration</h2>
        <div class="line"></div>
        <p>Food forests are powerful carbon sinks. Trees and perennial plants capture carbon dioxide from the atmosphere and store it in their biomass and in the soil. By establishing food forests, we're creating long-term carbon storage while producing nutritious food.</p>
      </div>
    </div>
  </div>

  <!-- SECTION 6: BENEFIT 4 - WATER CONSERVATION -->
  <div class="section benefit-section" id="water-section" data-bg="#A7FFEB" data-text-color="#004D40">
    <div class="content-container">
      <div class="benefit-content">
        <div class="benefit-icon">
          <i class="fas fa-tint"></i>
        </div>
        <h2>Water Conservation</h2>
        <div class="line"></div>
        <p>The multi-layered structure of food forests helps capture and retain water. Deep tree roots improve soil structure, allowing better water infiltration and reducing runoff. The canopy provides shade, reducing evaporation, while ground covers protect soil moisture.</p>
      </div>
    </div>
  </div>

  <!-- SECTION 7: CALL TO ACTION -->
  <div class="section" id="cta-section" data-bg="#E0F7FA" data-text-color="#006064">
    <div class="content-container">
      <h2>Join Our Community</h2>
      <div class="line"></div>
      <p>Ready to be part of the sustainable food movement? Explore our network of food forests, connect with forest keepers, or start your own food forest journey today.</p>
      <div class="cta-buttons">
        <a href="{{ url_for('views.food_forests') }}" class="cta-button">Explore Forests</a>
        <a href="{{ url_for('auth.sign_up') }}" class="cta-button primary">Sign Up</a>
      </div>
    </div>
  </div>
</div>

<!-- Fullpage.js & GSAP scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const fullpageInstance = new fullpage("#fullpage", {
      scrollingSpeed: 1000,
      autoScrolling: true,
      navigation: true,
      navigationPosition: 'right',
      navigationTooltips: ['Welcome', 'Food Forests', 'Biodiversity', 'Soil Health', 'Carbon', 'Water', 'Join Us'],
      showActiveTooltip: true,
      css3: true,
      easingcss3: 'cubic-bezier(0.645, 0.045, 0.355, 1.000)',
      
      // Snap effect between sections
      scrollOverflow: true,
      scrollOverflowOptions: {
        scrollbars: false,
      },
      
      // Animation on leave/enter
      onLeave: function (origin, destination, direction) {
        const leavingSection = origin.item;
        const enteringSection = destination.item;
        
        // Animate out current section
        gsap.to(leavingSection.querySelectorAll('h1, h2, p, .line, .benefit-icon, .cta-buttons, .food-forest-content'), {
          opacity: 0,
          y: direction === 'down' ? -50 : 50,
          stagger: 0.05,
          duration: 0.5,
          ease: "power2.out",
        });
        
        // Animate in new section
        gsap.fromTo(
          enteringSection.querySelectorAll('h1, h2, p, .line, .benefit-icon, .cta-buttons, .food-forest-content'),
          { 
            opacity: 0, 
            y: direction === 'down' ? 50 : -50 
          },
          {
            opacity: 1,
            y: 0,
            stagger: 0.1,
            duration: 0.7,
            delay: 0.3,
            ease: "power2.out",
          }
        );
        
        // Change background color
        const newBgColor = enteringSection.getAttribute("data-bg");
        const newTextColor = enteringSection.getAttribute("data-text-color");
        
        gsap.to(enteringSection, {
          backgroundColor: newBgColor,
          color: newTextColor,
          duration: 0.8,
          ease: "power2.inOut",
        });
        
        // Animate line
        const line = enteringSection.querySelector('.line');
        if (line) {
          gsap.fromTo(line,
            { width: "0px" },
            { 
              width: "150px", 
              duration: 1.2, 
              delay: 0.5,
              ease: "power2.out" 
            }
          );
        }
        
        // Special animation for benefit icons
        const icon = enteringSection.querySelector('.benefit-icon');
        if (icon) {
          gsap.fromTo(icon,
            { scale: 0.5, opacity: 0 },
            { 
              scale: 1, 
              opacity: 1, 
              duration: 0.8, 
              delay: 0.6,
              ease: "back.out(1.7)" 
            }
          );
        }
      },
      
      // Initialize first section
      afterLoad: function(origin, destination, direction) {
        const section = destination.item;
        const line = section.querySelector('.line');
        
        if (line && destination.index === 0) {
          gsap.fromTo(line,
            { width: "0px" },
            { 
              width: "150px", 
              duration: 1.2, 
              delay: 0.5,
              ease: "power2.out" 
            }
          );
        }
      }
    });
    
    // Initialize animations for first section
    const firstSection = document.querySelector('#welcome-section');
    gsap.fromTo(
      firstSection.querySelectorAll('h1, p, .line, .cta-buttons'),
      { opacity: 0, y: 30 },
      { 
        opacity: 1, 
        y: 0, 
        stagger: 0.1, 
        duration: 0.8, 
        delay: 0.3,
        ease: "power2.out" 
      }
    );
  });
</script>
{% endblock %}
