{% extends "base.html" %}
{% block content %}

<div class="article-container article-page">
  <article class="comparison-article">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <div class="hero-left">
          <div class="hero-label">Prototype</div>
          <h1 class="hero-title">Discover the Real Value of Food with Compear</h1>
        </div>
        <div class="hero-right">
          <div class="hero-image">
            <img src="{{ url_for('static', filename='uploads/ketelbroek-website-achtergrond.jpg') }}" alt="Food Forest Garden" />
          </div>
        </div>
      </div>
    </section>

    <!-- Tool Description Section -->
    <section class="tool-description">
      <div class="container">
        <h2>The Compear Tool</h2>
        <p class="description-text">
          Our True Value Comparison Tool is an interactive visualisation that reveals the hidden costs and benefits behind the food we eat. By comparing food forest products with those from conventional agriculture, this tool helps you understand the real impact of your choices, beyond just the price tag. Conventional farming often comes with unseen ecological costs, like carbon emissions, water pollution, and biodiversity loss. These costs aren't reflected at the checkout but are paid by the planet and eventually, by all of us. In contrast, food forest products are grown in harmony with nature, reducing harm and even generating ecological value. This tool breaks down those factors and shows how investing in sustainably grown food in food forests can ultimately cost less, for you and for the planet.
        </p>
        <p class="explore-text">
          Explore the comparison below to see how much true value food forests provide.
        </p>
      </div>
    </section>

    <!-- Slider Section -->
    <section class="comparison-slider-section">
      <h2>How many KG of food do you want to compare?</h2>
      <p class="slider-instruction">Use the slider below to show how many KG of apples you would like to compare</p>
      
      <div class="slider-container">
        <input type="range" min="1" max="1000" value="1" step="10" class="slider" id="amountSlider">
        <div class="slider-value"><span id="current-amount">20000</span>KG</div>
      </div>
    </section>

    <!-- Comparison Section -->
<section class="comparison-section-new">
  <div class="comparison-container">
    <!-- Comparison Images -->
    <div class="comparison-images">
      <div class="comparison-side">
        <div class="comparison-image">
          <img src="{{ url_for('static', filename='images/hero_pears.jpg') }}" alt="Food forest produce" />
        </div>
        <h3>Food-Forest</h3>
      </div>
      
      <div class="vs-divider">VS</div>
      
      <div class="comparison-side">
        <div class="comparison-image">
          <img src="/placeholder.svg?height=200&width=300" alt="Conventional agriculture" />
        </div>
        <h3>Agriculture</h3>
      </div>
    </div>

    <!-- Unified Metrics Rectangle -->
    <div class="unified-metrics-rectangle">
      <!-- Carbon Row -->
      <div class="metric-row" data-section="carbon-section">
        <div class="metric-value left" id="carbon-forest">+€0.00</div>
        <div class="metric-label">
          <span>Carbon</span>
        </div>
        <div class="metric-value right" id="carbon-agriculture">+€2.67</div>
      </div>

      <!-- Water Row -->
      <div class="metric-row" data-section="water-section">
        <div class="metric-value left" id="water-forest">+€0.00</div>
        <div class="metric-label">
          <span>Water</span>
        </div>
        <div class="metric-value right" id="water-agriculture">+€0.05</div>
      </div>

      <!-- True Costs Row -->
      <div class="metric-row main-metric">
        <div class="metric-value left" id="true-costs-forest">+€0.00</div>
        <div class="metric-label main">
          <div class="arrow-down">↓</div>
          <span>True costs</span>
        </div>
        <div class="metric-value right" id="true-costs-agriculture">+€2.72</div>
      </div>

      <!-- Nutrition Row -->
      <div class="metric-row" data-section="nutrition-section">
        <div class="metric-value left" id="nutrition-forest">Increased</div>
        <div class="metric-label">
          <span>Nutrition</span>
        </div>
        <div class="metric-value right" id="nutrition-agriculture">Decreased</div>
      </div>

      <!-- Biodiversity Row -->
      <div class="metric-row" data-section="biodiversity-section">
        <div class="metric-value left" id="biodiversity-forest">Increased</div>
        <div class="metric-label">
          <span>Biodiversity</span>
        </div>
        <div class="metric-value right" id="biodiversity-agriculture">Decreased</div>
      </div>

      <!-- True Value Row -->
      <div class="metric-row" data-section="true-value-section">
        <div class="metric-value left" id="true-value-forest">Higher</div>
        <div class="metric-label">
          <span>True value</span>
        </div>
        <div class="metric-value right" id="true-value-agriculture">Lower</div>
      </div>
    </div>
  </div>
</section>

    <!-- Detailed Sections -->
    <section id="carbon-section" class="detail-section">
      <h2>Carbon Sequestration</h2>
      <div class="detail-content">
        <div class="detail-text">
          <p>Food forests act as carbon sinks, actively capturing carbon dioxide from the atmosphere through photosynthesis and storing it in plants, trees, and soil.</p>
          <p>Compared to conventional farming, food forests store significantly more carbon in their diverse plant communities, extensive root systems, and undisturbed soil. This sequestration helps mitigate climate change.</p>
        </div>
        <div class="detail-image">
          <img src="{{ url_for('static', filename='uploads/shutterstock_1974223916_0.jpg') }}" alt="Carbon sequestration illustration" />
        </div>
      </div>
    </section>

    <section id="water-section" class="detail-section">
      <h2>Water Quality</h2>
      <div class="detail-content">
        <div class="detail-image">
          <img src="{{ url_for('static', filename='uploads/water-globe_shutterstock_115060456_500px1.jpg') }}" alt="Water quality illustration" />
        </div>
        <div class="detail-text">
          <p>Food forests use water more efficiently than conventional agriculture. Their multi-layered structure and rich soil organic matter improve water retention and reduce runoff.</p>
          <p>Unlike conventional farms that often require irrigation and contribute to water pollution through fertilizer and pesticide runoff, food forests naturally filter water and help recharge groundwater supplies.</p>
        </div>
      </div>
    </section>

    <section id="nutrition-section" class="detail-section">
      <h2>Nutrition</h2>
      <div class="detail-content">
        <div class="detail-text">
          <p>Food grown in diverse food forest systems typically contains higher nutrient density than conventionally grown counterparts. The rich soil biology supports more complete mineral profiles in the food.</p>
          <p>Conventional agriculture often prioritizes yield and appearance over nutritional content. Food forests produce foods with higher levels of antioxidants, vitamins, and minerals due to healthier growing conditions.</p>
        </div>
        <div class="detail-image">
          <img src="{{ url_for('static', filename='uploads/A-Z-Guide-of-Nutrition-Essentials_truworth-wellness.jpg') }}" alt="Nutrition illustration" />
        </div>
      </div>
    </section>

    <section id="biodiversity-section" class="detail-section">
      <h2>Biodiversity</h2>
      <div class="detail-content">
        <div class="detail-image">
          <img src="{{ url_for('static', filename='uploads/peacock-butterfly-1655724_1920.jpg') }}" alt="Biodiversity illustration" />
        </div>
        <div class="detail-text">
          <p>Food forests support significantly more species than conventional agriculture. Their diverse structure provides habitat for beneficial insects, birds, and other wildlife.</p>
          <p>Biodiversity creates resilience against pests and diseases naturally, reducing or eliminating the need for chemical interventions. This creates a self-regulating ecosystem that becomes more stable over time.</p>
        </div>
      </div>
    </section>

    <section id="true-value-section" class="detail-section">
      <h2>True Value</h2>
      <div class="detail-content">
        <div class="detail-text">
          <p>When we factor in all environmental costs and benefits, food forest products often represent better value despite sometimes higher upfront prices.</p>
          <p>Conventional agriculture creates "externalities" - environmental and social costs not reflected in the price. Food forests generate positive externalities through ecosystem services like carbon sequestration, water purification, and biodiversity support.</p>
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="article-cta">
      <h2>Experience the Difference</h2>
      <p>Visit our network of food forests to taste the difference and see sustainable agriculture in action.</p>
      <div class="cta-buttons">
        <a href="{{ url_for('views.food_forests') }}" class="cta-button primary">Find a Food Forest</a>
        <a href="{{ url_for('auth.sign_up') }}" class="cta-button secondary">Join Our Community</a>
      </div>
    </section>
  </article>
</div>

<style>
  /* Reset and base styles */
  .article-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0;
    font-family: Arial, sans-serif;
  }

  /* Hero Section */
  .hero-section {
    background: #f8f9fa;
    padding: 0;
    margin-top: 0;
    height: 100vh;
    min-height: 600px;
    display: flex;
    align-items: center;
  }

  .hero-content {
    display: flex;
    align-items: center;
    gap: 0;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0;
    height: 100%;
    width: 100%;
  }

  .hero-left {
    flex: 1;
    padding: 4rem;
    background: #f8f9fa;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .hero-label {
    font-size: 1rem;
    color: #666;
    margin-bottom: 1rem;
    font-weight: 500;
  }

  .hero-title {
    font-size: 3.5rem;
    font-weight: bold;
    color: #333;
    line-height: 1.2;
    margin: 0;
  }

  .hero-right {
    flex: 1;
    position: relative;
    height: 100%;
  }

  .hero-image {
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .hero-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Tool Description Section */
  .tool-description {
    padding: 4rem 0;
    background: white;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .tool-description h2 {
    font-size: 2.5rem;
    color: #ccc;
    margin-bottom: 2rem;
    font-weight: 300;
  }

  .description-text {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #666;
    margin-bottom: 1.5rem;
  }

  .explore-text {
    font-size: 1.1rem;
    color: #666;
    margin-bottom: 0;
  }

  /* Slider Section */
  .comparison-slider-section {
    text-align: center;
    margin-bottom: 3rem;
    padding: 0 2rem;
  }

  .comparison-slider-section h2 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    color: #333;
    font-weight: normal;
  }

  .slider-instruction {
    color: #666;
    margin-bottom: 2rem;
    font-size: 1rem;
  }

  .slider-container {
    max-width: 600px;
    margin: 0 auto;
    position: relative;
  }

  .slider {
    -webkit-appearance: none;
    width: 100%;
    height: 12px;
    border-radius: 25px;
    background: #7CB342;
    outline: none;
    margin-bottom: 1rem;
  }

  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: white;
    cursor: pointer;
    border: 2px solid #7CB342;
  }

  .slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: white;
    cursor: pointer;
    border: 2px solid #7CB342;
  }

  .slider-value {
    font-size: 1.2rem;
    color: #333;
    font-weight: 500;
  }

  /* Comparison Section - Figma Design Implementation */
.comparison-section-new {
  background: #e8e8e8;
  padding: 2rem;
  margin: 0 2rem 4rem;
  max-width: 1000px;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 4rem;
}

.comparison-container {
  max-width: 900px;
  margin: 0 auto;
}

.comparison-images {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 3rem;
  gap: 2rem;
}

.comparison-side {
  flex: 1;
  text-align: center;
  max-width: 300px;
}

.comparison-image {
  width: 250px;
  height: 180px;
  margin: 0 auto 1rem;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.comparison-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.comparison-side h3 {
  font-size: 1.8rem;
  color: #2e7d32;
  font-weight: 600;
  margin: 0;
}

.vs-divider {
  font-size: 2.5rem;
  font-weight: bold;
  color: #2e7d32;
  padding: 0 1rem;
  flex-shrink: 0;
}

/* Unified Metrics Rectangle - Exact Figma Implementation */
.unified-metrics-rectangle {
  background: #e8e8e8;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0;
  max-width: 800px;
  margin: 0 auto;
}

.metric-row {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 0;
  min-height: 70px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.metric-row:hover {
  transform: translateY(-2px);
}

.metric-row.main-metric {
  margin: 0;
}

.metric-label {
  color: #333;
  padding: 1.2rem 2rem;
  text-align: center;
  font-weight: 600;
  font-size: 1.1rem;
  min-width: 140px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 70px;
}

.metric-label.main {
  padding: 1.5rem 2rem;
  font-size: 1.2rem;
  min-height: 90px;
}

.metric-label .sub-label {
  display: block;
  font-size: 0.9rem;
  font-weight: 500;
  margin-top: 0.2rem;
}

.arrow-down {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  color: #333;
  font-weight: bold;
}

.metric-value {
  padding: 1rem 2rem;
  border-radius: 35px;
  font-weight: 600;
  font-size: 1rem;
  text-align: center;
  min-width: 160px;
  transition: all 0.3s ease;
  margin: 0.5rem;
  min-height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.metric-value.left {
  background: #4caf50;
  color: white;
  justify-self: end;
}

.metric-value.right {
  background: #8d6e63;
  color: white;
  justify-self: start;
}

.metric-value.left:hover,
.metric-value.right:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* Responsive Design */
@media (max-width: 768px) {
  .comparison-images {
    flex-direction: column;
    gap: 1rem;
  }

  .vs-divider {
    margin: 1rem 0;
    font-size: 2rem;
  }

  .metric-row {
    grid-template-columns: 1fr;
    gap: 0.5rem;
    text-align: center;
  }

  .metric-value {
    justify-self: center;
    min-width: 140px;
    margin: 0.3rem auto;
  }

  .comparison-side h3 {
    font-size: 1.5rem;
  }

  .comparison-image {
    width: 200px;
    height: 150px;
  }

  .unified-metrics-rectangle {
    padding: 0;
  }

  .metric-label {
    padding: 1rem 1.5rem;
    font-size: 1rem;
    min-height: 60px;
  }

  .metric-value {
    padding: 0.8rem 1.5rem;
    font-size: 0.9rem;
    min-height: 45px;
  }
}

@media (max-width: 480px) {
  .comparison-section-new {
    margin: 0 1rem 3rem;
    padding: 1.5rem;
  }

  .metric-label {
    padding: 0.8rem 1rem;
    font-size: 0.95rem;
    min-height: 55px;
  }

  .metric-value {
    padding: 0.7rem 1rem;
    font-size: 0.85rem;
    min-height: 40px;
    min-width: 120px;
  }
}

  /* Detail Sections */
  .detail-section {
    margin-bottom: 5rem;
    scroll-margin-top: 100px;
    padding: 0 2rem;
  }

  .detail-section h2 {
    font-size: 2rem;
    color: #333;
    margin-bottom: 2rem;
    text-align: center;
  }

  .detail-content {
    display: flex;
    gap: 3rem;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
  }

  .detail-text {
    flex: 1;
  }

  .detail-text p {
    color: #555;
    line-height: 1.8;
    margin-bottom: 1rem;
  }

  .detail-image {
    flex: 1;
    max-width: 500px;
    min-width: 400px;
  }

  .detail-image img {
    width: 100%;
    height: 300px;
    object-fit: cover;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  /* Call to Action */
  .article-cta {
    text-align: center;
    background: #f9f9f9;
    padding: 3rem 2rem;
    border-radius: 12px;
    margin: 0 2rem;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
  }

  .article-cta h2 {
    font-size: 2rem;
    color: #333;
    margin-bottom: 1rem;
  }

  .article-cta p {
    color: #666;
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .cta-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
  }

  .cta-button {
    display: inline-block;
    padding: 1rem 2rem;
    border-radius: 30px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .cta-button.primary {
    background: #4CAF50;
    color: white;
  }

  .cta-button.secondary {
    background: white;
    color: #4CAF50;
    border: 2px solid #4CAF50;
  }

  .cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  /* Responsive Adjustments */
  @media (max-width: 992px) {
    .hero-content {
      flex-direction: column;
      height: auto;
    }

    .hero-left {
      height: auto;
      padding: 3rem 2rem;
    }

    .hero-right {
      height: 50vh;
      min-height: 300px;
    }

    .hero-title {
      font-size: 2.5rem;
    }

    .detail-content {
      flex-direction: column;
    }

    .detail-image {
      order: -1;
      margin-bottom: 2rem;
    }
  }

  @media (max-width: 768px) {
    .hero-title {
      font-size: 2rem;
    }

    .hero-left {
      padding: 2rem 1rem;
    }

    .comparison-images {
      flex-direction: column;
      gap: 1rem;
    }

    .vs-divider {
      margin: 1rem 0;
    }

    .cta-buttons {
      flex-direction: column;
      align-items: center;
    }

    .metric-row {
      flex-direction: column;
      gap: 0.5rem;
      text-align: center;
    }
  }
</style>

<!-- JavaScript for the slider functionality and navbar scroll -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  /* ---------- CONSTANTS ---------- */
  const baseTrueCostPerKg = 2.72;
  const baseCarbonPerKg = 2.67;
  const baseWaterPerKg = 0.05;

  /* ---------- MAIN UPDATE ---------- */
  function updateValues(amount) {
    // 1. Update the displayed amount
    document.getElementById('current-amount').textContent = amount;

    // 2. Calculate values based on amount
    const totalTrueCost = baseTrueCostPerKg * amount;
    const totalCarbon = baseCarbonPerKg * amount;
    const totalWater = baseWaterPerKg * amount;
    
    // 3. Update Carbon values
    document.getElementById('carbon-forest').textContent = `+€0.00`;
    document.getElementById('carbon-agriculture').textContent = `+€${totalCarbon.toFixed(2)}`;
    
    // 4. Update Water values
    document.getElementById('water-forest').textContent = `+€0.00`;
    document.getElementById('water-agriculture').textContent = `+€${totalWater.toFixed(2)}`;
    
    // 5. Update True Costs values
    if (amount >= 1000) {
      const trueCostK = totalTrueCost / 1000;
      document.getElementById('true-costs-forest').textContent = `+€0.00`;
      document.getElementById('true-costs-agriculture').textContent = `+€${trueCostK.toFixed(2)}K total`;
    } else {
      document.getElementById('true-costs-forest').textContent = `+€0.00`;
      document.getElementById('true-costs-agriculture').textContent = `+€${totalTrueCost.toFixed(2)} total`;
    }
  }

  /* ---------- SLIDER HOOK ---------- */
  const slider = document.getElementById('amountSlider');
  slider.addEventListener('input', () => updateValues(parseInt(slider.value, 10)));

  /* ---------- METRIC ROW CLICK HANDLERS ---------- */
  document.querySelectorAll('.metric-row[data-section]').forEach(row => {
    row.addEventListener('click', function() {
      const sectionId = this.getAttribute('data-section');
      const targetElement = document.getElementById(sectionId);
      
      if (targetElement) {
        // Add visual feedback
        this.style.background = 'rgba(76, 175, 80, 0.2)';
        setTimeout(() => {
          this.style.background = '';
        }, 300);
        
        // Smooth scroll to section
        window.scrollTo({
          top: targetElement.offsetTop - 100,
          behavior: 'smooth'
        });
      }
    });
  });

  /* ---------- NAVBAR SCROLL EFFECT ---------- */
  const navbar = document.querySelector('.navbar');
  const transparentHeader = document.querySelector('.transparent-header');
  
  if (transparentHeader && navbar) {
    window.addEventListener('scroll', function() {
      if (window.scrollY > 50) {
        transparentHeader.classList.add('scrolled');
      } else {
        transparentHeader.classList.remove('scrolled');
      }
    });
  }

  /* ---------- FIRST LOAD ---------- */
  updateValues(parseInt(slider.value, 10));
});
</script>

{% endblock %}
